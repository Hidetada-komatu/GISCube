{% include 'header.html' %}

<link rel="stylesheet" href="http://openlayers.org/en/v3.0.0/css/ol.css" type="text/css">
<script src="http://openlayers.org/en/v3.0.0/build/ol.js" type="text/javascript"></script>
  
  
<style>
  .map-container {
    width:  auto;
    height: 700px;
  }
</style>



<!-- Map Settings/-->

<!-- /left-nav-stack-bar -->
<div class="row">
  <div class="col-md-2">
    <ul class="nav nav-pills nav-stacked">
      <li><a href="resource">Data Resource</a></li>
      <li><a href="information">Data Information</a></li>
      <li class="active"><a href="visualiser">Data Visualiser</a></li>
      <li><a href="tools">GeoSpatial Tools</a></li>
    </ul>
  </div>
<!-- left-nav-stack-bar/ -->



<div class="col-md-2">
  <ul id="myTab" class="nav nav-tabs">
    <li class="active"><a href="#vectorData" data-toggle="tab">Vector Data</a></li>
    <li><a href="#rasterData" data-toggle="tab">Raster Data</a></li>
  </ul>

   <div id="myTabContent" class="tab-content">
    <div class="tab-pane fade in active" id="vectorData">
      {% for json in jsons %}
        <div class="checkbox">
          <label>
            <input type="checkbox" value={{ json }} id="{{ json }}" onchange="add_remove_layer({{ json }}, '{{ json }}')"> 
            {{ json }}
          </label>
        </div>
      {% endfor %}
    </div>
   </div>
</div>
    


<!-- /Map box -->
    <div class="col-md-8">
    <div class="container">
    <div class="map-container" id="map"></div>
     <div id="map"></div>
    </div>
  </div>
</div>
<!-- Map box/ -->

<script type="text/javascript">
  {% for json in jsons %}
  var {{ json }} = new ol.layer.Vector({
          source: new ol.source.GeoJSON({
          projection: 'EPSG:3857',
          url: 'static/uploaded_files/{{ json }}.json'})
        });
  {% endfor %}

  var map = new ol.Map({
    target: 'map',
      layers: [
        new ol.layer.Tile({
          source: new ol.source.MapQuest({layer: 'osm'})
        }),
      ],
      view: new ol.View({
        center: ol.proj.transform([-30, 37], 'EPSG:4326', 'EPSG:3857'),
        zoom: 2
      })
    });
  
  function add_remove_layer(layer, json) {
    if (document.getElementById(json).checked == true){
      map.addLayer(layer);
    }else{
      map.removeLayer(layer);
    }
  }
    </script>

{% include 'footer.html' %}
